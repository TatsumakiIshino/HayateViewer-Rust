# 改訂履歴 (Changelog)

## [0.2.6-test1] - 2024-12-21 (Test Version)

### [0.2.6-test1] 追加・改善

- **RAR (CBR) 書庫のサポート**:
  - `unrar` クレートの導入により、現代的な RAR5 形式に完全対応。
  - **遅延展開（Lazy Extraction）方式**を採用。書庫オープン時の UI フリーズを解消し、バックグラウンドでの安定した画像読み込みを実現。
  - 7z 形式についても同様に遅延展開化し、全体的なレスポンス性能を向上。
  - 隣接ボリューム移動機能（`[` / `]` キー）における RAR ファイルのネイティブ認識。

## [0.2.5] - 2025-12-21

### [0.2.5] 追加・改善

- **キャッシュ・メモリ管理の抜本的最適化**:
  - CPUキャッシュを単なる LRU から「現在ページからの距離」を考慮した管理方式に変更。
  - 表示中のページをキャッシュから絶対に破棄しない保護機能を追加し、高速スクロール時の画面チラつき（暗転）を解消。
- **読み込み優先度制御 (AsyncLoader) の導入**:
  - 先読みリクエストに優先度（Priority）を導入し、「現在表示されているページ」を最優先でロードするようキューを再編。
  - 古くなった非効率な読み込みリクエストを自動的にスキップし、描画のレスポンス性能を向上。
- **Loading インジケータの追加**:
  - 画像の読み込みが間に合わない場合に `Loading Page X...` と表示。
  - 画像未ロードの状態でも適切なレイアウト枠を維持し、描画ガタつきを防止。
- **ビルド環境のクリーンアップ**:
  - 未使用の変数、インポート、デッドコードを整理・抑制し、警告のないクリーンなビルドを実現。
  - 非同期処理のスレッド安全性 (Send境界) を改善し、実行時の安定性を向上。

### [0.2.5] 修正

- 見開き表示において、一部のページが正しくキャッシュされず表示されない問題を修正。
- 高速スクロール時に GPU メモリ解放とロードが競合して描画が不安定になる現象を解消。

## [0.2.4] - 2025-12-21

### [0.2.4] 追加・改善

- **フォルダ/アーカイブ間移動機能の追加**:
  - `[` キー（前へ）と `]` キー（次へ）で、同じディレクトリ内の次のフォルダやアーカイブ（ZIP, 7z, CBZ）に直接移動できる機能を追加。
  - 自然順ソート（natord）に基づいた適切な順序での遷移を実現。
- **CBZ形式のサポート**:
  - アーカイブ読み込み対象に `.cbz` 拡張子を追加。

## [0.2.3] - 2025-12-21

### [0.2.3] 追加・改善

- **シークバーのインタラクティブ化**:
  - マウスのクリック・ドラッグによる直感的なページ移動に対応。
  - 操作中のバーの強調表示（太さ・色の変化）による視覚的フィードバック。
  - 見開き表示時のスナップ機能（表紙やフォルダ境界を考慮した適切な位置への制御）。
- **ページジャンプUI (Shift+S) のリデザイン**:
  - 入力画面の刷新（角丸パネル、統合された中央揃えレイアウト）。
  - 点滅カーソルの導入と大型フォント（24pt/Bold）による視認性の向上。
  - 論理キー判定への切り替えによる数値入力（テンキー含む）の確実な動作。
- **ステータス表示の改善**:
  - 見開き表示時に「2-3 / 204」のように表示中のページ範囲を示す形式に変更。
- **描画エンジンの拡張**:
  - レンダラーに角丸矩形、テキスト中央揃え、大型フォント用フォーマットなどの機能を追加。

## [0.2.2] - 2025-12-21

- **設定画面（オーバーレイ）の日本語実装**:
  - アプリ内で操作可能な設定画面を Direct2D で構築。
  - レンダリングエンジン、見開き、綴じ方向、補間モード、キャッシュ容量などを日本語で設定可能。
- **設定の動的反映**:
  - 設定変更後、即座に描画（リサンプリング精度やステータスバーの表示切替など）に反映。
- **コンソール表示の抑制**:
  - リリースビルド版において、不要なコンソールウィンドウが表示されないよう属性を設定。
- **プロジェクト情報の整理**:
  - 日本語による `README.md` の作成。
  - バージョン情報をウィンドウタイトルに表示し、ソースコード内で一括管理。

### [0.2.2] 修正

- **ルーペ機能の正確な拡大ロジック**:
  - ウィンドウ中央を基準とした正しい相対パン計算式を導入し、クリックした位置がズーム後もずれないように修正。
  - 見開き表示時に、拡大位置によってページが画面外に消えてしまう不具合を解消。
- **ビルド・CI環境の修正**:
  - Git のコミット漏れによるビルドエラーを修正し、GitHub Actions による自動リリースを安定化。

---

## [0.2.0] - 2025-12-21

- Rust版 HayateViewer (Direct2D) の基本機能の実装。
- ZIP, 7z 対応、見開き表示機能。
