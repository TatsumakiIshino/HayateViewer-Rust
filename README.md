# HayateViewer Rust

Direct2D, D3D11, OpenGL などの多様な描画バックエンドを選択可能な、高速・軽量な画像・自炊コミックビューアです。
Python版 HayateViewer のコンセプトを継承し、更なるパフォーマンスを追求して Rust で再構築されています。

## 主な特徴

- **マルチ・レンダリングエンジン**:
  - **Direct2D**: 高品質な標準エンジン。
  - **Direct3D 11**: YCbCr シェーダーによる超高速描画。
  - **OpenGL**: クロスプラットフォームを見据えた高性能エンジン。
- **統一されたサンプリング設定**: エンジンを選ばず、常に最適なサンプリングモード（Nearest Neighbor から Lanczos まで）を選択可能。
- **2層キャッシュシステム**: CPU (メモリ) と GPU (VRAM) の両方で画像をキャッシュし、スムーズなページめくりを実現。
- **多様なフォーマットへの対応**:
  - 画像: JPEG, PNG, BMP, WEBP, **JPEG 2000 (JP2)**
  - 書庫: ZIP (CBZ), 7z (CB7), **RAR (CBR)**
- **快適な閲覧機能**:
  - 表示モード（単一ページ / 左綴じ見開き / 右綴じ見開き）
  - リアルタイムルーペ機能（右クリック）
  - スムーズなズーム・パン
  - シークバー表示（マウスドラッグ対応）
  - ページジャンプ UI (Shift+S)
- **Modern UI 設定画面**: デザイン性に優れた半透明オーバーレイによる日本語設定画面。
- **情報表示の最適化**:
  - **タイトルバー**: アーカイブ名と表示中の画像ファイル名をクリアに表示。
  - **ステータスバー**: ページ番号、見開き状態、キャッシュ状況などの詳細情報を集約（設定で詳細表示のON/OFFが可能）。

## GPU リサンプリングの対応状況

現在、設定画面から以下のモードを選択可能です。

| モード名 | 内容 | 対応状況 |
| :--- | :--- | :--- |
| **Nearest Neighbor** | 最近傍補間 | 全エンジン対応 (ドット絵などに最適) |
| **Bilinear** | 双線形補間 | 全エンジン対応 (バランス型) |
| **Bicubic** | 双三次補間 | 全エンジン対応 (滑らかな画質) |
| **Lanczos3** | ランツォシュ | 全エンジン対応 (高品質・鋭い画質) |

## システム要件

- OS: Windows 10 / 11 (64bit)
- グラフィックス: DirectX 11.0 または OpenGL 3.3 以上に対応した GPU

## クイックスタート

### 開発用ビルドと実行

```powershell
cargo run
```

### リリース用ビルド

```powershell
cargo build --release
```

バイナリは `target/release/HayateViewer-Rust.exe` に生成されます。

## 操作方法

| キー / マウス | 動作 |
| :--- | :--- |
| `左右キー` / `ホイール` | ページ移動 |
| `O` (オー) | 設定画面を開く / 閉じる |
| `B` | 表示モードの切り替え (単一 -> 左綴じ -> 右綴じ) |
| `右クリック` | ルーペ（拡大表示） |
| `左ドラッグ` | パン（移動） |
| `S` | シークバーの表示切替 |
| `Shift + S` | ページジャンプ UI を開く |
| `Esc` | 設定画面 / ページジャンプを閉じる |

## ライセンス

[MIT License](LICENSE) (予定)
